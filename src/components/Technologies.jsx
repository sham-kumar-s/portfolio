import React from 'react';
import { Code } from 'lucide-react';

const ReactLogo = () => (
  <svg viewBox="175.7 78 490.6 436.9" xmlns="http://www.w3.org/2000/svg">
    <g fill="#61DAFB">
      <path d="m666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9v-22.3c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6v-22.3c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zm-101.4 106.7c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24s9.5 15.8 14.4 23.4zm73.9-208.1c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6s22.9-35.6 58.3-50.6c8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zm53.8 142.9c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6z"></path>
      <circle cx="420.9" cy="296.5" r="45.7"></circle>
    </g>
  </svg>
);

const JSLogo = () => (
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500">
    <rect x="5.5" y="5.5" fill="rgba(0,0,0,.1)" width="489" height="489"></rect>
    <path fill="#F7DF1E" d="M454.478 377.875c-3.58-22.312-18.128-41.045-61.218-58.522-14.967-6.88-31.654-11.806-36.628-23.147-1.767-6.602-1.999-10.319-.883-14.318 3.208-12.968 18.686-17.012 30.958-13.293 7.902 2.648 15.386 8.739 19.895 18.453 21.104-13.666 21.056-13.572 35.792-22.963-5.393-8.366-8.275-12.225-11.807-15.804-12.69-14.177-29.981-21.475-57.639-20.917-4.788.604-9.622 1.255-14.41 1.86-13.805 3.486-26.96 10.737-34.676 20.452-23.149 26.264-16.547 72.234 11.621 91.153 27.75 20.824 68.517 25.565 73.722 45.042 5.067 23.845-17.524 31.561-39.975 28.819-16.548-3.439-25.752-11.854-35.7-27.146-18.313 10.598-18.313 10.598-37.139 21.428 4.462 9.762 9.157 14.178 16.641 22.637 35.42 35.931 124.063 34.166 139.959-20.22.651-1.859 4.927-14.317 1.487-33.514zm-183.142-147.63h-45.74l-.186 118.252c0 25.147 1.302 48.203-2.789 55.27-6.694 13.897-24.032 12.178-31.935 9.481-8.042-3.951-12.132-9.575-16.873-17.523-1.301-2.278-2.278-4.044-2.604-4.184-12.411 7.576-24.775 15.2-37.187 22.776 6.182 12.69 15.293 23.707 26.96 30.864 17.432 10.458 40.858 13.666 65.355 8.041 15.943-4.647 29.703-14.27 36.907-28.911 10.412-19.198 8.181-42.439 8.088-68.145.236-41.927.004-83.854.004-125.921z"></path>
  </svg>
);

const NodeLogo = () => (
  <svg viewBox="0 0 256 298" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid">
    <path d="M115.497 261.088L115.497 247.168L125.166 228.032L62.972 189.312L62.972 49.92L125.166 10.816L115.497 .256L4.736 .256L4.736 9.664L87.936 55.616L87.936 183.68L23.936 220.032L23.936 231.68L115.497 296.96L115.497 261.088ZM140.032 261.248L251.231 261.248L251.231 251.776L168.576 205.952L168.576 77.888L232.064 41.472L232.064 29.952L140.032 -35.328L140.032 .256L130.24 10.816L192.512 49.664L192.512 189.056L130.24 228.16L140.032 238.656L140.032 261.248Z" fill="#339933"/>
  </svg>
);

const PythonLogo = () => (
  <svg viewBox="0 0 256 255" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid">
    <defs>
      <linearGradient x1="12.959%" y1="12.039%" x2="79.639%" y2="78.201%" id="python-original-a">
        <stop stopColor="#387EB8" offset="0%"/>
        <stop stopColor="#366994" offset="100%"/>
      </linearGradient>
      <linearGradient x1="22.531%" y1="22.626%" x2="99.966%" y2="99.61%" id="python-original-b">
        <stop stopColor="#FFE052" offset="0%"/>
        <stop stopColor="#FFC331" offset="100%"/>
      </linearGradient>
    </defs>
    <path d="M126.916.072c-64.832 0-60.784 28.115-60.784 28.115l.072 29.128h61.868v8.405H42.175S.153 61.6.153 125.269c0 63.673 36.21 62.072 36.21 62.072h21.713v-30.356s-1.165-36.21 35.632-36.21h61.13s34.475.557 34.475-33.319V33.97S194.67.072 126.916.072zM92.864 19.66a9.22 9.22 0 0 1 9.382 8.7 9.22 9.22 0 0 1-8.538 9.383 9.22 9.22 0 0 1-9.382-8.538 9.22 9.22 0 0 1 8.538-9.545z" fill="url(#python-original-a)"/>
    <path d="M128.757 254.126c64.832 0 60.784-28.115 60.784-28.115l-.072-29.127H127.6v-8.405h86.897s42.022 3.705 42.022-59.963c0-63.673-36.21-62.072-36.21-62.072h-21.713v30.355s1.165 36.21-35.632 36.21h-61.13s-34.475-.557-34.475 33.32v56.013s-5.242 33.897 62.512 33.897zm34.052-19.586a9.22 9.22 0 0 1-9.382-8.7 9.22 9.22 0 0 1 8.538-9.382 9.22 9.22 0 0 1 9.382 8.538 9.22 9.22 0 0 1-8.538 9.544z" fill="url(#python-original-b)"/>
  </svg>
);

const TailwindLogo = () => (
  <svg viewBox="0 0 1000 1000" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M489.5 226.499C328 231.632 280 346.999 269 409.499C283.333 386.332 328.5 335.5 395 335.5C472.5 335.5 531.5 422 567.5 449C611.237 481.803 699.123 525.115 814.5 490C906.5 462 949.167 364.332 958.5 317.999C914 378.499 846.5 414.838 763 371.999C705.5 342.499 662.5 221 489.5 226.499Z" fill="#06B6D4"></path>
    <path d="M261 500.999C99.5 506.132 51.5 621.499 40.5 683.999C54.8333 660.832 100 610 166.5 610C244 610 303 696.5 339 723.5C382.737 756.303 470.623 799.615 586 764.5C678 736.5 720.667 638.832 730 592.499C685.5 652.999 618 689.338 534.5 646.499C477 616.999 434 495.5 261 500.999Z" fill="#06B6D4"></path>
  </svg>
);

const MongoLogo = () => (
  <svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid">
    <path d="M175.622 61.107c-1.313-6.552-5.697-11.409-11.298-14.493-1.823-1.005-3.755-1.811-5.747-2.394 2.048-3.021 3.755-6.23 5.08-9.58 3.755-9.58 4.83-20.268 2.782-31.216-1.005-5.428-2.782-10.38-5.08-14.87a47.932 47.932 0 0 0-5.697-7.888c-1.005-1.005-2.01-1.943-3.082-2.815-1.072-1.005-2.21-1.943-3.348-2.815-5.697-4.43-12.544-7.514-20.068-8.988-3.082-.603-6.23-1.005-9.446-1.005-3.215 0-6.497.335-9.713 1.005-7.524 1.407-14.371 4.491-20.068 8.988-1.138.872-2.21 1.81-3.348 2.815-1.072.872-2.077 1.81-3.082 2.815a47.932 47.932 0 0 0-5.697 7.888c-2.298 4.49-4.075 9.442-5.08 14.87-2.048 10.948-.973 21.636 2.782 31.216 1.325 3.35 3.032 6.559 5.08 9.58-1.992.583-3.924 1.389-5.747 2.394-5.601 3.084-9.985 7.941-11.298 14.493-1.38 6.89-1.046 14.103.872 21.182 1.943 7.079 5.08 13.633 9.18 19.326 1.072 1.81 2.21 3.552 3.415 5.227 1.138 1.608 2.343 3.15 3.615 4.626 1.272 1.476 2.61 2.882 4.013 4.22 2.815 2.748 5.83 5.227 9.046 7.404 6.431 4.357 13.81 7.173 21.52 8.252 1.943.268 3.886.469 5.897.603 2.01.134 4.022.201 6.096.201 2.074 0 4.086-.067 6.096-.201 2.011-.134 3.954-.335 5.897-.603 7.71-1.079 15.089-3.895 21.52-8.252 3.216-2.177 6.231-4.656 9.046-7.404 1.403-1.338 2.741-2.744 4.013-4.22 1.272-1.476 2.477-3.018 3.615-4.626 1.205-1.675 2.343-3.417 3.415-5.227 4.1-5.693 7.237-12.247 9.18-19.326 1.918-7.079 2.252-14.292.872-21.182zm-47.22 144.792c-1.943 5.227-4.357 10.048-7.173 14.503-1.81 2.882-3.752 5.63-5.83 8.252-1.943 2.482-4.022 4.83-6.163 7.04-1.943 2.01-3.954 3.886-6.096 5.63-2.748 2.21-5.63 4.222-8.718 6.029-1.81 1.138-3.686 2.21-5.63 3.15-1.943.94-3.954 1.743-6.03 2.412-2.01.603-4.086 1.138-6.23 1.47-2.748.402-5.563.603-8.379.603-2.815 0-5.63-.201-8.379-.603-2.144-.335-4.22-.87-6.23-1.47-2.076-.67-4.087-1.472-6.03-2.412-1.944-.94-3.82-2.012-5.63-3.15-3.088-1.807-5.97-3.819-8.718-6.029-2.142-1.744-4.153-3.62-6.096-5.63-2.141-2.21-4.22-4.558-6.163-7.04-2.078-2.622-4.02-5.37-5.83-8.252-2.816-4.455-5.23-9.276-7.173-14.503-1.943-5.227-3.282-10.653-3.954-16.144-.335-2.748-.469-5.497-.469-8.312v-8.718c0-2.815.134-5.564.469-8.312.672-5.491 2.011-10.917 3.954-16.144 1.943-5.227 4.357-10.048 7.173-14.503 1.81-2.882 3.752-5.63 5.83-8.252 1.943-2.482 4.022-4.83 6.163-7.04 1.943-2.01 3.954-3.886 6.096-5.63 2.748-2.21 5.63-4.222 8.718-6.029 1.81-1.138 3.686-2.21 5.63-3.15 1.943-.94 3.954-1.743 6.03-2.412 2.01-.603 4.086-1.138 6.23-1.47 2.748-.402 5.563-.603 8.379-.603 2.815 0 5.63.201 8.379.603 2.144.335 4.22.87 6.23 1.47 2.076.67 4.087 1.472 6.03 2.412 1.944.94 3.82 2.012 5.63 3.15 3.088 1.807 5.97 3.819 8.718 6.029 2.142 1.744 4.153 3.62 6.096 5.63 2.141 2.21 4.22 4.558 6.163 7.04 2.078 2.622 4.02 5.37 5.83 8.252 2.816 4.455 5.23 9.276 7.173 14.503 1.943 5.227 3.282 10.653 3.954 16.144.335 2.748.469 5.497.469 8.312v8.718c0 2.815-.134 5.564-.469 8.312-.672 5.491-2.011 10.917-3.954 16.144z" fill="#47A248"/>
  </svg>
);

export default function Technologies({ theme }) {
  const isDark = theme === 'dark';

  React.useEffect(() => {
    const styleSheet = document.createElement("style");
    styleSheet.innerText = `
      @keyframes marquee-move {
        to {
          transform: translateX(calc((var(--item-width) + var(--item-gap)) * var(--numItems) * -1));
        }
      }
    `;
    document.head.appendChild(styleSheet);
    return () => {
      if (document.head.contains(styleSheet)) {
        document.head.removeChild(styleSheet);
      }
    };
  }, []);

  const logos1 = [
    { id: 1, component: <ReactLogo /> },
    { id: 2, component: <JSLogo /> },
    { id: 3, component: <NodeLogo /> },
    { id: 4, component: <PythonLogo /> },
    { id: 5, component: <TailwindLogo /> },
    { id: 6, component: <MongoLogo /> },
  ];

  const logos2 = [
    { id: 1, component: <ReactLogo /> },
    { id: 2, component: <JSLogo /> },
    { id: 3, component: <NodeLogo /> },
    { id: 4, component: <PythonLogo /> },
    { id: 5, component: <TailwindLogo /> },
    { id: 6, component: <MongoLogo /> },
  ];

  const Marquee = ({ logos, direction = 'forwards' }) => {
    const numItems = logos.length;
    const speed = '25s';
    const itemWidth = '120px';
    const itemGap = '25px';

    return (
      <div
        className="max-w-full overflow-hidden"
        style={{
          '--speed': speed,
          '--numItems': numItems,
          '--item-width': itemWidth,
          '--item-gap': itemGap,
          '--direction': direction,
          maskImage: 'linear-gradient(to right, transparent, black 2rem, black calc(100% - 2rem), transparent)',
        }}
      >
        <div
          className="w-max flex"
          style={{
            '--track-width': `calc(var(--item-width) * ${numItems})`,
            '--track-gap': `calc(var(--item-gap) * ${numItems})`,
          }}
        >
          {[...logos, ...logos].map((logo, index) => (
            <div
              key={index}
              className={`flex-shrink-0 flex justify-center items-center rounded-2xl ${
                isDark ? 'bg-gray-800/50 border border-gray-700' : 'bg-white border border-gray-300 shadow-sm'
              }`}
              style={{
                width: 'var(--item-width)',
                aspectRatio: '1 / 1.2',
                marginRight: 'var(--item-gap)',
                animation: `marquee-move var(--speed) linear infinite ${direction}`,
              }}
            >
              <div className="w-3/5 h-auto">
                {logo.component}
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  };

  return (
    <section id="technologies" className="py-20">
      <div className="max-w-4xl mx-auto px-4">
        <div className="flex items-center justify-center mb-12">
          <Code className="mr-3 text-blue-500" size={32} />
          <h2 className={`text-4xl font-bold ${
            isDark ? 'text-gray-100' : 'text-gray-900'
          }`}>Technologies</h2>
        </div>
        <div className="items-center overflow-hidden">
          <div className="w-full flex flex-col gap-y-6">
            <Marquee logos={logos1} />
            <Marquee logos={logos2} direction="reverse" />
          </div>
        </div>
      </div>
    </section>
  );
}
